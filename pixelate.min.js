(function(e){e.fn.extend({pixelate:function(){var a={value:.05,reveal:true};var t=arguments[0]||{};if(typeof t!=="object"){t={value:parseInt(arguments[0])}}t=e.extend(a,t);return this.each(function(){var a=this,n=e(a).width(),r=e(a).height(),i=false;var d=document.createElement("canvas");d.width=n;d.height=r;var l=d.getContext("2d");l.mozImageSmoothingEnabled=false;l.webkitImageSmoothingEnabled=false;l.imageSmoothingEnabled=false;var o=e.extend(t,function(){var e={};for(var t=0;t<a.attributes.length;t++){e[a.attributes[t].name.replace(/^data\-/,"")]=a.attributes[t].value}return e}());var u=n*o.value,g=r*o.value;l.drawImage(a,0,0,u,g);l.drawImage(d,0,0,u,g,0,0,d.width,d.height);e(a).hide();e(a).before(d);if(o.reveal&&o.reveal!=="false"){e(d).click(function(){i=!i;if(i){l.drawImage(a,0,0,n,r)}else{l.drawImage(a,0,0,u,g);l.drawImage(d,0,0,u,g,0,0,d.width,d.height)}});e(d).hover(function(){if(i)return;l.drawImage(a,0,0,n,r)},function(){if(i)return;l.drawImage(a,0,0,u,g);l.drawImage(d,0,0,u,g,0,0,d.width,d.height)})}})}});e(window).on("load",function(){e("img[data-pixelate]").pixelate()})})(jQuery);
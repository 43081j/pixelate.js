!function(window,$){var pixelate=function(){var defaults={value:.05,reveal:!0,revealonclick:!1},options=arguments[1]||{},element=this,elementParent=element.parentNode;"object"!=typeof options&&(options={value:parseInt(arguments[1])}),options=function(){var opts={};for(var k in defaults)element.hasAttribute("data-"+k)?opts[k]=element.getAttribute("data-"+k):opts[k]=k in options?options[k]:defaults[k];return opts}();var imgWidth=element.width,imgHeight=element.height,revealed=!1,canv=document.createElement("canvas");canv.width=imgWidth,canv.height=imgHeight;var ctx=canv.getContext("2d");ctx.mozImageSmoothingEnabled=!1,ctx.webkitImageSmoothingEnabled=!1,ctx.imageSmoothingEnabled=!1;var width=imgWidth*options.value,height=imgHeight*options.value;ctx.drawImage(element,0,0,width,height),ctx.drawImage(canv,0,0,width,height,0,0,canv.width,canv.height),element.style.display="none",elementParent.insertBefore(canv,element),!1!==options.revealonclick&&"false"!==options.revealonclick&&canv.addEventListener("click",function(){(revealed=!revealed)?ctx.drawImage(element,0,0,imgWidth,imgHeight):(ctx.drawImage(element,0,0,width,height),ctx.drawImage(canv,0,0,width,height,0,0,canv.width,canv.height))}),!1!==options.reveal&&"false"!==options.reveal&&(canv.addEventListener("mouseenter",function(){revealed||ctx.drawImage(element,0,0,imgWidth,imgHeight)}),canv.addEventListener("mouseleave",function(){revealed||(ctx.drawImage(element,0,0,width,height),ctx.drawImage(canv,0,0,width,height,0,0,canv.width,canv.height))}))};window.HTMLImageElement.prototype.pixelate=pixelate,"function"==typeof $&&$.fn.extend({pixelate:function(){return this.each(function(){pixelate.apply(this,arguments)})}}),document.addEventListener("DOMContentLoaded",function(){for(var img=document.querySelectorAll("img[data-pixelate]"),i=0;i<img.length;i++)img[i].addEventListener("load",function(){this.pixelate()})})}(window,"undefined"==typeof jQuery?null:jQuery);